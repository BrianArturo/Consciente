<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:o="http://omnifaces.org/ui">


<h:head>

	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="shortcut icon" type="image/x-icon" href="../resources/img/Ico.ico" />
	

	 
 	 <h:outputStylesheet library="css" name="sb-admin-2.css" /> 
	 
	 
	 
	 <h:outputScript library="js" name="jquery.min.js" />
	 <h:outputScript library="js" name="bootstrap.bundle.min.js" />
	 <h:outputScript library="js" name="jquery.easing.min.js" />
	 <h:outputScript library="js" name="sb-admin-2.min.js" />
	 
	 <h:outputScript library="js" name="jquery.dataTables.min.js" />
	 <h:outputScript library="js" name="dataTables.bootstrap4.min.js" />
	 <h:outputScript library="js" name="datatables-demo.js" />

<!--   <script src="vendor/datatables/dataTables.bootstrap4.min.js"></script> -->
	 
</h:head>


<h:body>

	<h2>Sistema de polizas</h2>

	<h:form id="form">
		<h:panelGroup style="width:70%">

			<div class="col-md-2">
				<div class="form-group">
					<p:outputLabel for="tipoPoliza" value="Tipo Poliza"
						class="control-label" />
					<h:selectOneMenu id="tipoPoliza"
						class="col-sm-10 form-control m-b-15" label="Tipo Poliza"
						value="#{polizasBean.tipoPoliza}">

						<f:selectItem itemLabel="Seleccione un tipo de poliza"
							itemValue="" noSelectionOption="true" />
						<f:selectItems value="#{polizasBean.listTipoPoliza}"
							itemLabel="#{tipoPoliza.nombre}" itemValue="#{tipoPoliza}" />
					</h:selectOneMenu>
				</div>
			</div>

			<div class="col-md-2">
				<div class="form-group">
					<p:outputLabel for="empresas" value="Tipo Compañia"
						class="control-label" />
					<h:selectOneMenu id="empresas" 
						filter="true" filterMatchMode="startsWith" effect="fade"
						class="col-sm-10 form-control m-b-15" label="Tipo Compañia"
						value="#{polizasBean.compania}">

						<f:selectItem itemLabel="Seleccione un tipo de compania"
							itemValue="" noSelectionOption="true" />
						<f:selectItems value="#{polizasBean.listEmpresas}"
							itemLabel="#{compania.nombre}" itemValue="#{compania}" />
					</h:selectOneMenu>


				</div>
			</div>
			<br></br>
			<p:commandButton value="Guardar" id="ajax"
				action="#{polizasBean.enviar}" style="margin-right:20px;"
				styleClass="ui-priority-primary" />
		</h:panelGroup>

		<h:panelGroup>
			<p:dataTable var="polizas" value="#{polizasBean.listPolizas}"
				paginator="true" rows="10"
				paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
				rowsPerPageTemplate="5,10,15" selectionMode="single"
				rowKey="#{polizas.numPoliza}"
				selection="#{polizasBean.selectPolizas}" id="carTable" lazy="true">


				<p:ajax event="rowSelect" listener="#{polizasBean.onRowSelect}"
					update=":form:carDetail" oncomplete="PF('carDialog').show()" />
				<p:column headerText="Id" sortBy="#{polizas.numPoliza}"
					filterBy="#{polizas.numPoliza}">
					<h:outputText value="#{polizas.numPoliza}" />
				</p:column>
				<p:column headerText="Year" sortBy="#{polizas.fecExpedicion}"
					filterBy="#{polizas.fecExpedicion}">
					<h:outputText value="#{polizas.fecExpedicion}" />
				</p:column>
				<p:column headerText="Brand" sortBy="#{polizas.fecIniVigencia}"
					filterBy="#{polizas.fecIniVigencia}">
					<h:outputText value="#{polizas.fecIniVigencia}" />
				</p:column>
				<p:column headerText="Color" sortBy="#{polizas.numSoat}"
					filterBy="#{polizas.numSoat}">
					<h:outputText value="#{polizas.numSoat}" />
				</p:column>
			</p:dataTable>

			<p:dialog header="Car Detail" widgetVar="carDialog" modal="true"
				showEffect="fade" hideEffect="fade" resizable="false">
				<p:outputPanel id="carDetail" style="text-align:center;">
					<p:panelGrid columns="2"
						rendered="#{not empty dtLazyView.selectedCar}"
						columnClasses="label,value">
						<f:facet name="header">
							<p:graphicImage
								name="demo/images/car/#{dtLazyView.selectedCar.brand}-big.gif" />
						</f:facet>

						<h:outputText value="Id:" />
						<h:outputText value="#{dtLazyView.selectedCar.id}" />

						<h:outputText value="Year" />
						<h:outputText value="#{dtLazyView.selectedCar.year}" />

						<h:outputText value="Color:" />
						<h:outputText value="#{dtLazyView.selectedCar.color}"
							style="color:#{dtLazyView.selectedCar.color}" />

						<h:outputText value="Price:" />
						<h:outputText value="#{dtLazyView.selectedCar.price}">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:panelGrid>
				</p:outputPanel>
			</p:dialog>

		</h:panelGroup>

	</h:form>

</h:body>

</html>