<ui:composition template="/template/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:o="http://omnifaces.org/ui">


	<ui:define name="titleOption">Sistema de polizas</ui:define>
	<ui:define name="content">

		<h:body>

			<h:form id="form" styleClass="container-fluid">
				<p:growl id="msgs" showDetail="true"
					skipDetailIfEqualsSummary="true" />
				<p:panel header="Sistema de polizas" style="margin-bottom:10px;">
					<div class="row centered-form">

						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="tipoPoliza" value="Tipo Poliza" /> -->
								<!-- 								<br></br> -->
								<p:selectOneMenu id="tipoPoliza" label="Tipo Poliza" class=""
									value="#{polizasBean.tipoPoliza}" style="width:100%">

									<f:selectItem itemLabel="Seleccione un tipo de poliza"
										itemValue="" noSelectionOption="true" />
									<f:selectItems value="#{polizasBean.listTipoPoliza}"
										itemLabel="#{tipoPoliza.nombre}" itemValue="#{tipoPoliza}" />
								</p:selectOneMenu>


							</div>
						</div>


						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="empresas" value="Tipo Compañia" /> -->
								<!-- 								<br></br> -->
								<p:selectOneMenu id="empresas" filter="true" class=""
									filterMatchMode="startsWith" effect="fade"
									label="Tipo Compañia" value="#{polizasBean.compania}"
									style="width:100%">

									<f:selectItem itemLabel="Seleccione un tipo de compania"
										itemValue="" noSelectionOption="true" />
									<f:selectItems value="#{polizasBean.listEmpresas}"
										itemLabel="#{compania.nombre}" itemValue="#{compania}" />
								</p:selectOneMenu>
							</div>
						</div>



						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">
								<!-- 								<h:outputLabel for="productos" value="Tipo Producto" /> -->
								<!-- 								<br></br> -->
								<p:selectOneMenu id="productos" filter="true" class=""
									filterMatchMode="startsWith" effect="fade"
									label="Tipo Producto" value="#{polizasBean.producto}"
									style="width:100%">

									<f:selectItem itemLabel="Seleccione un tipo de producto"
										itemValue="" noSelectionOption="true" />
									<f:selectItems value="#{polizasBean.listProductos}"
										itemLabel="#{producto.nombre}" itemValue="#{producto}" />
								</p:selectOneMenu>

							</div>
						</div>
					</div>



					<div class="row centered-form">

						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="numeroPoliza" value="Número de Poliza" /> -->
								<!-- 								<br></br> -->
								<p:inputText id="numeroPoliza" placeholder="Número de Poliza"
									value="#{polizasBean.numeroPoliza}">
									<p:keyFilter regEx="/[a-z0-9_]/i" />
								</p:inputText>
							</div>
						</div>

						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="numeroSoat" value="Número de SOAT" /> -->
								<!-- 								<br></br> -->
								<p:inputNumber id="numeroSoat" value="#{polizasBean.numeroSoat}"
									placeholder="Número de soat">
									<p:keyFilter regEx="/[\d]/" />
								</p:inputNumber>
							</div>
						</div>
						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="numeroPlaca" value="Número de PLACA" /> -->
								<!-- 								<br></br> -->
								<p:inputText id="numeroPlaca" value="#{polizasBean.numeroPlaca}"
									placeholder="Número de placa" maxlength="7">
									<p:keyFilter regEx="/[a-z0-9_]/i" />
								</p:inputText>

							</div>
						</div>
					</div>


					<div class="row centered-form">

						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">
								<!-- 								<p:outputLabel for="fechaExpPoliza" value="Fecha Poliza" /> -->
								<!-- 								<br></br> -->
								<p:datePicker id="fechaExpPoliza" showIcon="false"
									readonlyInput="true" placeholder="Fecha Poliza"
									style="width:auto" value="#{polizasBean.fechaExpPoliza}" />
							</div>
						</div>

						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">


								<!-- 								<p:outputLabel for="fechaIniVigencia" -->
								<!-- 									value="Fecha Inicio Vigencia" /> -->
								<!-- 								<br></br> -->
								<p:datePicker id="fechaIniVigencia" showIcon="false"
									readonlyInput="true" placeholder="Fecha Inicio Vigencia"
									style="width:auto" value="#{polizasBean.fechaIniVigencia}" />
							</div>
						</div>

						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="fechaFinVigencia" value="Fecha Fin Vigencia" /> -->
								<!-- 								<br></br> -->
								<p:datePicker id="fechaFinVigencia" showIcon="false"
									readonlyInput="true" placeholder="Fecha de vigencia"
									style="width:auto" value="#{polizasBean.fechaFinVigencia}" />

							</div>
						</div>
					</div>


					<div class="row centered-form">
						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">
								<!-- 								<p:outputLabel for="fechaPago" value="Fecha Pago" /> -->
								<p:datePicker id="fechaPago" showIcon="false" style="width:auto"
									placeholder="Fecha Pago" value="#{polizasBean.fechaPago}" />
							</div>
						</div>
						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="valorpoliza" value="Valor Poliza" /> -->
								<!-- 								<br></br> -->
								<p:inputText id="valorpoliza" value="#{polizasBean.valorPoliza}"
									placeholder="Valor Poliza">
									<p:keyFilter regEx="/[\d]/" />
								</p:inputText>

							</div>
						</div>

						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="valorprima" value="Valor Prima" /> -->
								<!-- 								<br></br> -->
								<p:inputText id="valorprima" value="#{polizasBean.valorPrima}"
									placeholder="Valor Prima" onblur="{calcular();}">
									<p:ajax update="@this" />
<!-- 									<p:keyFilter regEx="/[\d]/" /> -->
								</p:inputText>

							</div>
						</div>
					</div>

					<!--  Ultimo -->
					<div class="row centered-form">
						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="comision" value="% de Comision" /> -->
								<!-- 								<br></br> -->
								<p:inputText id="comision" value="#{polizasBean.comision}"
									placeholder="% de Comision" onblur="{calcular();}">
									<p:ajax update="@this" />
<!-- 									<p:keyFilter regEx="/[\d]/" /> -->
								</p:inputText>

							</div>
						</div>
						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">

								<!-- 								<p:outputLabel for="participacion" value="% de participacion" /> -->
								<!-- 								<br></br> -->
								<p:inputText id="participacion"
									value="#{polizasBean.porcentaje}"
									placeholder="% de participación" onblur="{calcular();}">
									<p:ajax update="@this" />
<!-- 									<p:keyFilter regEx="/[\d]/" /> -->
								</p:inputText>

							</div>
						</div>

						<div class="col-xs-12 col-sm-12 col-md-4">
							<div class="form-group">
								<p:remoteCommand name="calcular"
									action="#{polizasBean.calcular}" update="valorComision"
									 />
								<!-- 								<p:outputLabel for="valorComision" value="Valor Comision" /> -->
								<!-- 								<br></br> -->
								<p:inputText id="valorComision" readonly="true"
									value="#{polizasBean.valorComision}"
									placeholder="Valor Comision" />

							</div>
						</div>
					</div>


				</p:panel>

				<p:panelGrid columns="4" layout="grid"
					styleClass="showcase-text-align-center centered-form">

					<p:panelGrid columns="2">
						<h:outputLabel for="tipocliente" value="Tipo Cliente" />
						<p:selectOneMenu id="tipocliente" label="Tipo Cliente"
							value="#{polizasBean.tipoCliente}">

							<f:selectItem itemLabel="Seleccione un tipo de Cliente"
								itemValue="" noSelectionOption="true" />
							<f:selectItems value="#{polizasBean.listTipoCliente}"
								itemLabel="#{tipoCliente.nombre}" itemValue="#{tipoCliente}" />
						</p:selectOneMenu>

						<h:outputText value="Tomador:" />
						<p:inputText id="tomador" value="#{polizasBean.cliente.tomador}"
							placeholder="Tomador" maxlength="50">
							<p:keyFilter regEx="/[a-z_]/i" />
						</p:inputText>

						<h:outputText value="No Identificaciòn" />
						<p:inputText id="nit"
							value="#{polizasBean.cliente.identificacion}"
							placeholder="Nit/Cc" maxlength="15">
							<p:keyFilter regEx="/[a-z0-9_]/i" />
						</p:inputText>

						<h:outputText value="Direccion" />
						<p:inputText id="direccion"
							value="#{polizasBean.cliente.direccion}" placeholder="Direccion">
							<p:keyFilter regEx="/[a-z0-9_]/i" />
						</p:inputText>

						<h:outputText value="Telefono" />
						<p:inputText id="telefono" value="#{polizasBean.cliente.telefono}"
							placeholder="Telefono" maxlength="15">
							<p:keyFilter regEx="/[\d]/" />
						</p:inputText>

						<h:outputText value="Correo" />
						<p:inputText id="email" value="#{polizasBean.cliente.email}"
							placeholder="Correo">
							<p:keyFilter regEx="/[a-z0-9_\.\-@]/i" />
						</p:inputText>



					</p:panelGrid>

					<!-- asegurado -->
					<p:panelGrid columns="2">

						<f:facet name="header">
							<h:outputText value="Informacion del Asegurado" />
						</f:facet>

						<h:outputText value="Nombre:" />
						<p:inputText id="nombreasegurado"
							value="#{polizasBean.asegurado.nombre}" placeholder="Nombre:"
							maxlength="50">
							<p:keyFilter regEx="/[a-z_]/i" />
						</p:inputText>

						<h:outputText value="No Identificaciòn" />
						<p:inputText id="nitasegurado"
							value="#{polizasBean.asegurado.identificacion}"
							placeholder="Nit/Cc" maxlength="15">
							<p:keyFilter regEx="/[a-z0-9_]/i" />
						</p:inputText>

						<h:outputText value="Direccion" />
						<p:inputText id="direccionasegurado"
							value="#{polizasBean.asegurado.direccion}"
							placeholder="Direccion">
							<p:keyFilter regEx="/[a-z0-9_]/i" />
						</p:inputText>

						<h:outputText value="Telefono" />
						<p:inputText id="telefonoasegurado"
							value="#{polizasBean.asegurado.telefono}" placeholder="Telefono"
							maxlength="15">
							<p:keyFilter regEx="/[\d]/" />
						</p:inputText>

					</p:panelGrid>

				</p:panelGrid>




				<p:commandButton value="Guardar" id="ajax"
					action="#{polizasBean.guardar}" style="margin-right:20px;"
					styleClass="ui-priority-primary" />


				<h:panelGroup>
					<p:dataTable var="polizas" value="#{polizasBean.listPolizas}"
						paginator="true" rows="10"
						paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
						rowsPerPageTemplate="5,10,15" selectionMode="single"
						rowKey="#{polizas.numPoliza}"
						selection="#{polizasBean.selectPolizas}" id="carTable" lazy="true">


						<p:ajax event="rowSelect" listener="#{polizasBean.onRowSelect}"
							update=":form:carDetail" oncomplete="PF('carDialog').show()" />
						<p:column headerText="Id" sortBy="#{polizas.numPoliza}"
							filterBy="#{polizas.numPoliza}">
							<h:outputText value="#{polizas.numPoliza}" />
						</p:column>
						<p:column headerText="Year" sortBy="#{polizas.fecExpedicion}"
							filterBy="#{polizas.fecExpedicion}">
							<h:outputText value="#{polizas.fecExpedicion}" />
						</p:column>
						<p:column headerText="Brand" sortBy="#{polizas.fecIniVigencia}"
							filterBy="#{polizas.fecIniVigencia}">
							<h:outputText value="#{polizas.fecIniVigencia}" />
						</p:column>
						<p:column headerText="Color" sortBy="#{polizas.numSoat}"
							filterBy="#{polizas.numSoat}">
							<h:outputText value="#{polizas.numSoat}" />
						</p:column>
					</p:dataTable>

					<p:dialog header="Car Detail" widgetVar="carDialog" modal="true"
						showEffect="fade" hideEffect="fade" resizable="false">
						<p:outputPanel id="carDetail" style="text-align:center;">
							<p:panelGrid columns="2"
								rendered="#{not empty dtLazyView.selectedCar}"
								columnClasses="label,value">
								<f:facet name="header">
									<p:graphicImage
										name="demo/images/car/#{dtLazyView.selectedCar.brand}-big.gif" />
								</f:facet>

								<h:outputText value="Id:" />
								<h:outputText value="#{dtLazyView.selectedCar.id}" />

								<h:outputText value="Year" />
								<h:outputText value="#{dtLazyView.selectedCar.year}" />

								<h:outputText value="Color:" />
								<h:outputText value="#{dtLazyView.selectedCar.color}"
									style="color:#{dtLazyView.selectedCar.color}" />

								<h:outputText value="Price:" />
								<h:outputText value="#{dtLazyView.selectedCar.price}">
									<f:convertNumber type="currency" currencySymbol="$" />
								</h:outputText>
							</p:panelGrid>
						</p:outputPanel>
					</p:dialog>

				</h:panelGroup>
			</h:form>

		</h:body>


	</ui:define>
</ui:composition>